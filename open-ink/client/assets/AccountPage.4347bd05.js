import{_ as g,r as n,b as U,d as k,c as m,a as e,e as w,t as _,w as c,v as d,u as I,f as S,g as V,h as A,o as v,U as P,p as q,i as N,A as B,j as D,k as M,P as h,l as j}from"./index.f83f4822.js";const r=i=>(q("data-v-8bc62c96"),i=i(),N(),i),L={class:"container d-flex flex-column pt-5 align-items-center"},T=["onSubmit"],E={class:"mb-3 col-6 text-center"},K=["src"],z={id:"helpId",class:"form-text text-muted"},C={class:"mb-3"},F=r(()=>e("label",{for:"",class:"form-label"},"Name",-1)),G={class:"mb-3"},H=r(()=>e("label",{for:"",class:"form-label"},"Username",-1)),J={key:0,class:"form-text text-danger"},O={key:1,id:"helpId",class:"form-text text-muted"},Q=r(()=>e("i",{class:"mdi mdi-check"},null,-1)),R={class:"mb-3"},W=r(()=>e("label",{for:"",class:"form-label"},"bio",-1)),X={class:"mb-3"},Y=r(()=>e("label",{for:"",class:"form-label"},"location",-1)),Z=["required"],$={class:"col-12"},ee=["disabled"],te={__name:"AccountPage",setup(i){const t=n({}),u=U(()=>B.account),p=n(null);n(!1);const b=n(!0),l=n("");k(()=>{t.value={...u.value}});function f(a){t.value.picture=a.url,p.value=a.file}async function x(){try{let a=await A.checkUsername(t.value.username);l.value=a.username}catch{l.value=""}}async function y(){try{if(p.value){let a=await D.upload(p.value,u.id,"profile-picture");t.value.picture=a.smallUrl}await M.update(t.value),h.toast("Profile Updated","success","top")}catch(a){h.error(a)}}return(a,s)=>(v(),m("div",L,[e("form",{class:"row text-light justify-content-center",onSubmit:V(y,["prevent"])},[e("div",E,[e("img",{src:t.value.picture,alt:""},null,8,K),w(P,{onUploading:f,options:{required:!1}}),e("small",z,_(t.value.email),1)]),e("div",C,[F,c(e("input",{type:"text",required:"","onUpdate:modelValue":s[0]||(s[0]=o=>t.value.name=o),class:"form-control",name:"name","aria-describedby":"helpId",placeholder:""},null,512),[[d,t.value.name]])]),e("div",G,[H,c(e("input",{type:"text",required:"",minLength:"3",maxLength:"15","onUpdate:modelValue":s[1]||(s[1]=o=>t.value.username=o),class:"form-control",name:"username","aria-describedby":"helpId",placeholder:"",onKeyup:x},null,544),[[d,t.value.username]]),l.value.length&&l.value!=I(u).username?(v(),m("small",J,_(l.value)+" is already taken",1)):(v(),m("small",O,[S("https://open-ink.art/"+_(t.value.username)+" ",1),Q]))]),e("div",R,[W,c(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>t.value.bio=o),class:"form-control",name:"bio","aria-describedby":"helpId",placeholder:"Digital artist"},null,512),[[d,t.value.bio]])]),e("div",X,[Y,c(e("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=o=>t.value.location=o),class:"form-control",name:"location","aria-describedby":"helpId",placeholder:"nowhere, usa"},null,512),[[d,t.value.location]])]),c(e("input",{type:"checkbox",required:!b.value},null,8,Z),[[j,!1]]),e("div",$,[e("button",{class:"btn btn-primary w-100",disabled:!b.value||l.value.length},"save",8,ee)])],40,T)]))}},se=g(te,[["__scopeId","data-v-8bc62c96"]]);export{se as default};
