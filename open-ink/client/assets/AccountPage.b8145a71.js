import{_ as S,r as u,b as V,A as q,w as A,c,a as e,d as P,t as d,e as B,f as h,g as f,h as n,v as _,u as y,i as x,j as M,k as C,o as i,U as D,p as j,l as E,m as L,n as T,P as g,q as K,s as R,x as $}from"./index.406287be.js";const l=m=>(j("data-v-ca6c00f2"),m=m(),E(),m),z={class:"container-fluid height-screen pt-5 align-items-center themeless"},F={class:"row justify-content-around px-5"},G=["onSubmit"],H={class:"row justify-content-center"},J={id:"helpId",class:"form-text text-muted"},O={class:"my-3 col-8 text-center picture-wrapper rounded"},Q=["src"],W={key:0,class:"my-1"},X={key:1,class:"my-1"},Y={key:0},Z={key:1},ee=l(()=>e("i",{class:"mdi mdi-map-marker"},null,-1)),te={class:"mb-3"},ae=l(()=>e("label",{for:"",class:"form-label"},"Name",-1)),se={class:"mb-3"},oe=l(()=>e("label",{for:"",class:"form-label"},"Username",-1)),le={key:0,class:"form-text text-danger"},ne={key:1,id:"helpId",class:"form-text text-muted"},ie=l(()=>e("i",{class:"mdi mdi-check text-success darken-10"},null,-1)),ce={class:"mb-3"},de=l(()=>e("label",{for:"displayName"},"display on profile",-1)),re={class:"d-flex"},ue={class:"form-check me-5"},me=l(()=>e("small",null,"name",-1)),pe={class:"form-check"},_e=l(()=>e("small",null,"username",-1)),ve={class:"mb-3"},he=l(()=>e("label",{for:"",class:"form-label"},"bio",-1)),fe={class:"mb-3"},be=l(()=>e("label",{for:"",class:"form-label"},"location",-1)),ye=["required"],xe={class:"col-12"},ge=["disabled"],ke=f("save "),Ue=l(()=>e("i",{class:"mdi mdi-account"},null,-1)),we=[ke,Ue],Ne={class:"col-12 col-md-7 px-0 px-md-4 mt-3 mt-md-0"},Ie={class:"text-dark bg-light rounded elevation-3 p-3"},Se={__name:"AccountPage",setup(m){const t=u({}),p=V(()=>q.account),v=u(null);u(!1);const b=u(!0),r=u("");A(()=>{t.value={...p.value}});function k(o,a="picture"){t.value[a]=o.url,v.value=o.file}async function U(){try{let o=await C.checkUsername(t.value.username);r.value=o.username}catch{r.value=""}}async function w(){try{if(v.value){let o=await L.upload(v.value,p.value.id,"profile-picture");t.value.picture=o.smallUrl+`?picture=${Math.floor(Math.random()*100)}`}await T.update(t.value),g.toast("Profile Updated","success","top")}catch(o){g.error(o)}}return(o,a)=>{const N=K("InvitesComponent"),I=R("tooltip");return i(),c("div",z,[e("section",F,[e("form",{class:"col-12 col-md-5 text-dark bg-light rounded elevation-3 p-3",onSubmit:P(w,["prevent"])},[e("div",H,[e("small",J,d(t.value.email),1),e("div",O,[e("img",{class:"account-picture elevation-3",src:t.value.picture,alt:""},null,8,Q),B(D,{id:"picture",onUploading:k,options:{required:!1},class:"upload-account on-hover"}),t.value.displayName=="username"?(i(),c("h5",W,[e("b",null,d(t.value.username),1)])):(i(),c("h5",X,[e("b",null,d(t.value.name),1)])),e("div",null,[t.value.bio?(i(),c("small",Y,d(t.value.bio)+"\u205F\u200A",1)):h("",!0),t.value.location?(i(),c("small",Z,[ee,f(d(t.value.location),1)])):h("",!0)])]),e("div",te,[ae,n(e("input",{type:"text",required:"","onUpdate:modelValue":a[0]||(a[0]=s=>t.value.name=s),class:"form-control",name:"name","aria-describedby":"helpId",placeholder:"",minlength:"3",maxlength:"25"},null,512),[[_,t.value.name]])]),e("div",se,[oe,n(e("input",{type:"text",required:"",minLength:"3",maxLength:"15","onUpdate:modelValue":a[1]||(a[1]=s=>t.value.username=s),class:"form-control",name:"username","aria-describedby":"helpId",placeholder:"",onKeyup:U},null,544),[[_,t.value.username]]),r.value.length&&r.value!=y(p).username?(i(),c("small",le,d(r.value)+" is already taken",1)):n((i(),c("small",ne,[f("https://open-ink.art/"+d(t.value.username)+" ",1),ie])),[[I,"this username is available"]])]),e("div",ce,[de,e("div",re,[e("div",ue,[me,n(e("input",{type:"radio",class:"form-check-input",name:"displayName","onUpdate:modelValue":a[2]||(a[2]=s=>t.value.displayName=s),value:"name"},null,512),[[x,t.value.displayName]])]),e("div",pe,[_e,n(e("input",{type:"radio",class:"form-check-input",name:"displayName","onUpdate:modelValue":a[3]||(a[3]=s=>t.value.displayName=s),value:"username"},null,512),[[x,t.value.displayName]])])])]),e("div",ve,[he,n(e("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=s=>t.value.bio=s),class:"form-control",name:"bio","aria-describedby":"helpId",placeholder:"Digital artist",minlength:"0",maxlength:"30"},null,512),[[_,t.value.bio]])]),e("div",fe,[be,n(e("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=s=>t.value.location=s),class:"form-control",name:"location","aria-describedby":"helpId",placeholder:"nowhere, usa",minlength:"0",maxlength:"25"},null,512),[[_,t.value.location]])]),n(e("input",{type:"checkbox",required:!b.value},null,8,ye),[[$,!1]]),e("div",xe,[e("button",{class:"btn-theme text-info w-100",disabled:!b.value||r.value.length},we,8,ge)])])],40,G),e("div",Ne,[e("div",Ie,[y(p).id?(i(),M(N,{key:0})):h("",!0)])])])])}}},qe=S(Se,[["__scopeId","data-v-ca6c00f2"]]);export{qe as default};
